<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <link rel="stylesheet" href="">
</head>
<body>
<script src='js/jquery-2.1.1.min.js'></script>
<script src='js/jquery.transit.js'></script>
<script>

var visualWidth = window.innerWidth;
var visualHeight = window.innerHeight;
 var confi = {
        keepZoomRatio: false,
        layer: {"width": "100%", "height": "100%", "top": 0, "left": 0},
        audio: {enable: true, playURl: "music/happy.mp3", cycleURL: "music/circulation.mp3"},
        setTime: {
            walkToThird: 6000,
            walkToMiddle: 6500,
            walkToEnd: 6500,
            walkTobridge: 2000,
            bridgeWalk: 2000,
            walkToShop: 1500,
            walkOutShop: 1500,
            openDoorTime: 800,
            shutDoorTime: 500,
            waitRotate: 850,
            waitFlower: 800
        },
        //定义花瓣的图片路径
        snowflakeURl: ["images/1.png", "images/2.png", "images/3.png", "images/4.png", "images/5.png", "images/6.png"]
    };
     function snowflake() {
        var $flakeContainer = $("#snowflake");

        function getImagesName() {
            return confi.snowflakeURl[[Math.floor(Math.random() * 6)]]
        }

        function createSnowBox() {
            var url = getImagesName();
            return $('<div class="snowbox" />').css({
                "width": 41,
                "height": 41,
                "position": "absolute",
                "backgroundSize": "cover",
                "zIndex": 100000,
                "top": "-41px",
                "backgroundImage": "url(" + url + ")"
            }).addClass("snowRoll")
        }

        setInterval(function () {
            var startPositionLeft = Math.random() * visualWidth - 100, startOpacity = 1;
            endPositionTop = visualHeight - 40, endPositionLeft = startPositionLeft - 100 + Math.random() * 500, duration = visualHeight * 10 + Math.random() * 5000;
            var randomStart = Math.random();
            randomStart = randomStart < 0.5 ? startOpacity : randomStart;
            var $flake = createSnowBox();
            $flake.css({left: startPositionLeft, opacity: randomStart});
            $flakeContainer.append($flake);
            $flake.transition({
                top: endPositionTop,
                left: endPositionLeft,
                opacity: 0.7
            }, duration, "ease-out", function () {
                $(this).remove()
            })
        }, 200)
    }
snowflake();
</script>
</body>
</html>
